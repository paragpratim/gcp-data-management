<!DOCTYPE html>
<html>
<head>
  <title>View Contracts</title>
  <script src="config.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
</head>
<body>
  <div class="container ui-widget ui-corner-all">
    <div class="logo">
      <img src="https://cdn-icons-png.flaticon.com/512/5968/5968705.png" alt="Logo">
    </div>
    <h1>View Contracts</h1>
    <nav style="margin-bottom:32px;">
      <a href="index.html" class="ui-button ui-widget ui-corner-all">Create Contract</a>
      <a href="view.html" class="ui-button ui-widget ui-corner-all">View Contract</a>
      <a href="update.html" class="ui-button ui-widget ui-corner-all">Update Contract</a>
    </nav>
    <div class="form-group">
      <label for="contractIdSelect">Select Contract ID:</label>
      <select id="contractIdSelect"></select>
      <button id="loadContractBtn">Load Contract</button>
    </div>
    <pre id="viewResult"></pre>
  </div>
  <script>
    $(function() {
      $("#loadContractBtn").button();
      $.get(window.API_CONFIG.BASE_URL + "/api/contracts/all-ids", function(ids) {
        $("#contractIdSelect").empty();
        ids.forEach(function(id) {
          $("#contractIdSelect").append($("<option>").val(id).text(id));
        });
      });
      $("#loadContractBtn").on("click", function() {
        const contractId = $("#contractIdSelect").val();
        if (!contractId) return;
        $.get(window.API_CONFIG.BASE_URL + "/api/contracts/get/" + contractId, function(contract) {
          $("#viewResult").text(JSON.stringify(contract, null, 2));
        });
      });
    });
  </script>
</body>
</html>